<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8" />
  <title>Değişiklik Talebi Başlat</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <style>
    body { font-family: Arial, sans-serif; margin: 40px; }
    .section { margin-bottom: 24px; }
    .field { margin-bottom: 12px; }
    input, textarea, select { padding: 8px; width: 360px; }
    textarea { height: 80px; }
    button { padding: 8px 16px; cursor: pointer; margin-top: 8px; }
    .msg { margin-top: 12px; white-space: pre-line; }
    .error { color: #b00020; }
    .ok { color: #0a7a0a; }
    .hidden { display: none; }
  </style>
</head>
<body>

  <h2>Değişiklik Talebi Başlat</h2>

  <!-- 1) Talep Türü -->
  <div class="section">
    <label>Talep Türü:</label><br/>
    <select id="changeType" onchange="onTypeChange()">
      <option value="">Seçiniz...</option>
      <option value="newDoc">Yeni doküman aktarımı</option>
      <option value="improvement">Üründe iyileşme yaratacak doküman güncellemesi</option>
      <option value="nonconformity">Uygunsuzluk gidermek için doküman güncellemesi</option>
    </select>
  </div>

  <!-- (1) Yeni Doküman -->
  <div id="newDocSection" class="section hidden">
    <h3>Yeni Doküman Aktarımı</h3>
    <div class="field">
      <label>Doküman Numarası:</label><br/>
      <input id="docNo" />
    </div>
    <div class="field">
      <label>Doküman Kodu:</label><br/>
      <input id="docCode" />
    </div>
    <button onclick="checkDoc()">Kontrol Et</button>

    <div id="newDocStep2" class="hidden">
      <div class="field">
        <label>Doküman Linki:</label><br/>
        <input id="docLink" placeholder="https://..." />
      </div>
      <button onclick="submitNewDoc()">Gönder</button>
    </div>
  </div>

  <!-- (2) İyileştirme -->
  <div id="improvementSection" class="section hidden">
    <h3>İyileştirme Gerekçesi</h3>
    <div class="field">
      <label>Öncesinde üründe herhangi bir sorun gözlemlendi mi?</label><br/>
      <select id="hadIssue">
        <option value="">Seçiniz...</option>
        <option value="no">Hayır, sorun yoktu (iyileştirme)</option>
        <option value="yes">Evet, sorun vardı</option>
      </select>
    </div>
    <div class="field">
      <label>Açıklama:</label><br/>
      <textarea id="improveDesc"></textarea>
    </div>
    <button onclick="submitImprovement()">Devam</button>
  </div>

  <!-- (3) Uygunsuzluk -->
  <div id="ncSection" class="section hidden">
    <h3>Uygunsuzluk Bilgileri</h3>
    <div class="field"><input id="ncWhere" placeholder="Nerede görüldü?" /></div>
    <div class="field"><input id="ncWhen" placeholder="Ne zaman görüldü?" /></div>
    <div class="field"><input id="ncLevel" placeholder="Hangi seviye (birim/kart/sistem)?" /></div>
    <div class="field"><input id="ncStep" placeholder="Hangi üretim adımında?" /></div>
    <div class="field"><input id="ncTest" placeholder="Hangi testte?" /></div>
    <button onclick="submitNC()">Devam</button>
  </div>

  <p id="msg" class="msg"></p>

  <script src="app.js"></script>
</body>
</html>
